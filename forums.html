<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Forums | Spark Youth</title>
    <link
      rel="icon"
      type="image/png"
      href="https://i.ibb.co/RkMkNqTB/download.png"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Caveat:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="assets/css/global.css" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Outfit", "sans-serif"],
              hand: ["Caveat", "cursive"],
            },
            colors: {
              spark: {
                yellow: "#FFD600",
                orange: "#FF9F1C",
                blue: "#2EC4B6",
                navy: "#011627",
                cream: "#FDFFFC",
                red: "#E71D36",
              },
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-slate-50 flex flex-col min-h-screen">
    <div
      id="page-loader"
      class="fixed inset-0 bg-spark-cream z-50 flex items-center justify-center"
    >
      <div
        class="animate-spin rounded-full h-12 w-12 border-b-2 border-teal-500"
      ></div>
    </div>

    <!-- HEADER (Copied from Home, identical layout) -->
    <header
      class="sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-100 px-4 py-3 flex justify-between items-center"
    >
      <a href="home.html" class="flex items-center space-x-2 cursor-pointer">
        <img
          src="https://i.ibb.co/RkMkNqTB/download.png"
          class="h-8 w-8 object-contain"
          alt="Logo"
        />
        <h1 class="text-xl font-bold text-spark-navy tracking-tight">
          Spark<span class="text-spark-blue">Youth</span>
        </h1>
      </a>
      <div class="flex items-center space-x-3">
        <button
          class="safety-btn bg-spark-red hover:bg-red-600 text-white text-sm font-bold px-4 py-2 rounded-full transition-transform active:scale-95 flex items-center space-x-1 shadow-sm"
        >
          <i data-lucide="heart-handshake" class="w-4 h-4"></i
          ><span class="hidden sm:inline">Get Help</span>
        </button>
        <div class="relative">
          <button
            id="user-menu-btn"
            class="flex items-center space-x-2 p-1 pr-2 rounded-full border border-gray-200 hover:bg-gray-50 transition-colors group"
          >
            <div
              class="w-8 h-8 bg-spark-blue/10 text-spark-blue rounded-full flex items-center justify-center group-hover:bg-spark-blue group-hover:text-white transition-colors"
            >
              <i data-lucide="user" class="w-[18px] h-[18px]"></i>
            </div>
            <i
              id="user-menu-chevron"
              data-lucide="chevron-down"
              class="w-3.5 h-3.5 text-gray-400 transition-transform"
            ></i>
          </button>
          <div
            id="user-menu-dropdown"
            class="hidden absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 py-1 overflow-hidden animate-fade-in z-50"
          >
            <div class="px-4 py-3 border-b border-gray-50 bg-gray-50/50">
              <p class="text-xs font-bold text-gray-500 uppercase">
                Signed in as
              </p>
              <p
                class="user-email-display text-sm font-bold text-spark-navy truncate"
              >
                Member
              </p>
            </div>
            <a
              href="forums.html"
              class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2"
              ><i data-lucide="user" class="w-4 h-4 text-gray-400"></i>
              Profile</a
            >
            <div class="h-px bg-gray-100 my-1"></div>
            <button
              id="sign-out-btn"
              class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 font-bold flex items-center gap-2"
            >
              <i data-lucide="log-out" class="w-4 h-4"></i> Sign Out
            </button>
          </div>
        </div>
        <button
          id="mobile-menu-btn"
          class="p-2 text-spark-navy md:hidden hover:bg-gray-100 rounded-lg"
        >
          <i data-lucide="menu"></i>
        </button>
      </div>
    </header>

    <div
      id="mobile-menu"
      class="hidden fixed inset-0 z-30 bg-white pt-20 px-6 md:hidden animate-fade-in overflow-y-auto pb-10"
    >
      <div class="flex flex-col space-y-2">
        <div
          class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 pl-3"
        >
          Menu
        </div>
        <a
          href="home.html"
          class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors text-gray-600 hover:bg-gray-100"
          ><i data-lucide="home" class="w-5 h-5"></i
          ><span>Home Dashboard</span></a
        >
        <a
          href="resources.html"
          class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors text-gray-600 hover:bg-gray-100"
          ><i data-lucide="book-open" class="w-5 h-5"></i
          ><span>Resource Library</span></a
        >
        <div class="h-px bg-gray-100 my-2"></div>
        <a
          href="forums.html"
          class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors bg-spark-blue text-white font-bold shadow-sm"
          ><i data-lucide="users" class="w-5 h-5"></i><span>Forums</span></a
        >
        <a
          href="opportunities.html"
          class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors text-gray-600 hover:bg-gray-100"
          ><i data-lucide="lightbulb" class="w-5 h-5"></i
          ><span>Get Involved</span></a
        >
        <a
          href="live.html"
          class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors text-gray-600 hover:bg-gray-100"
          ><i data-lucide="tv" class="w-5 h-5"></i><span>Spark TV</span></a
        >
      </div>
    </div>

    <div class="flex flex-1 max-w-7xl mx-auto w-full">
      <aside
        class="hidden md:flex flex-col w-64 p-6 sticky top-16 h-[calc(100vh-4rem)]"
      >
        <div class="flex-1 overflow-y-auto custom-scrollbar">
          <nav class="space-y-1 mb-6">
            <div
              class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 px-3"
            >
              Main
            </div>
            <a
              href="home.html"
              class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors text-gray-600 hover:bg-gray-100"
              ><i data-lucide="home" class="w-5 h-5"></i><span>Home</span></a
            >
            <a
              href="resources.html"
              class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors text-gray-600 hover:bg-gray-100"
              ><i data-lucide="book-open" class="w-5 h-5"></i
              ><span>Resources</span></a
            >
          </nav>
          <nav class="space-y-1">
            <div
              class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 px-3"
            >
              Community
            </div>
            <a
              href="forums.html"
              class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors bg-spark-blue text-white font-bold shadow-sm"
              ><i data-lucide="users" class="w-5 h-5"></i><span>Forums</span></a
            >
            <a
              href="opportunities.html"
              class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors text-gray-600 hover:bg-gray-100"
              ><i data-lucide="lightbulb" class="w-5 h-5"></i
              ><span>Get Involved</span></a
            >
            <a
              href="live.html"
              class="flex items-center space-x-3 w-full p-3 rounded-xl transition-colors text-gray-600 hover:bg-gray-100"
              ><i data-lucide="tv" class="w-5 h-5"></i><span>Spark TV</span></a
            >
          </nav>
        </div>
      </aside>

      <main
        id="main-content"
        class="flex-1 p-4 md:p-8 overflow-y-auto pb-24 md:pb-8 hidden"
      >
        <div class="space-y-6 animate-fade-in">
          <!-- Tab Switcher -->
          <div
            class="flex flex-col md:flex-row justify-between items-end border-b border-gray-200 pb-4 gap-4"
          >
            <div>
              <h2 class="text-3xl font-bold text-spark-navy">
                Community Forums
              </h2>
              <p class="text-gray-600">
                A safe space to share, listen, and support each other.
              </p>
            </div>
            <div class="flex bg-gray-100 p-1 rounded-xl shrink-0">
              <button
                id="tab-feed"
                class="px-6 py-2 rounded-lg text-sm font-bold transition-all bg-white text-spark-blue shadow-sm"
              >
                Community Feed
              </button>
              <button
                id="tab-profile"
                class="px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 text-gray-500 hover:text-gray-700"
              >
                <i data-lucide="user" class="w-4 h-4"></i> My Profile
              </button>
            </div>
          </div>

          <!-- FEED VIEW -->
          <div id="view-feed" class="space-y-6">
            <div
              class="bg-amber-50 border border-amber-200 rounded-2xl p-4 flex items-start gap-3"
            >
              <i
                data-lucide="flag"
                class="text-amber-600 shrink-0 mt-1 w-5 h-5"
              ></i>
              <div>
                <h4 class="font-bold text-amber-800">Community Safety</h4>
                <p class="text-sm text-amber-700">
                  This forum is moderated. Please be kind and respectful. If you
                  see something concerning, report it immediately. Remember, we
                  are here to support each other! üíõ
                </p>
              </div>
            </div>

            <div class="flex justify-between items-center">
              <div
                class="flex gap-2 overflow-x-auto pb-2 no-scrollbar max-w-[80%]"
              >
                <button
                  class="px-4 py-2 rounded-xl font-bold whitespace-nowrap transition hover:opacity-80 bg-blue-100 text-blue-700"
                >
                  General Chat
                </button>
                <button
                  class="px-4 py-2 rounded-xl font-bold whitespace-nowrap transition hover:opacity-80 bg-yellow-100 text-yellow-700"
                >
                  School Life
                </button>
                <button
                  class="px-4 py-2 rounded-xl font-bold whitespace-nowrap transition hover:opacity-80 bg-red-100 text-red-700"
                >
                  Vent Space
                </button>
                <button
                  class="px-4 py-2 rounded-xl font-bold whitespace-nowrap transition hover:opacity-80 bg-purple-100 text-purple-700"
                >
                  Creative Corner
                </button>
              </div>
              <button
                class="bg-spark-blue text-white px-4 py-2 rounded-full font-bold shadow-md hover:bg-teal-500 transition flex items-center gap-2 text-sm whitespace-nowrap"
              >
                <i data-lucide="plus" class="w-[18px] h-[18px]"></i> Post
              </button>
            </div>

            <div class="space-y-4">
              <div
                class="bg-white p-5 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow cursor-pointer"
              >
                <div class="flex items-center gap-3 mb-3">
                  <div
                    class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-xs bg-indigo-500"
                  >
                    S
                  </div>
                  <div class="flex flex-col">
                    <span
                      class="font-bold text-sm text-spark-navy flex items-center gap-2"
                      >StarGazer99</span
                    ><span class="text-xs text-gray-400">2 hours ago</span>
                  </div>
                  <span
                    class="ml-auto text-xs font-medium px-3 py-1 bg-gray-100 rounded-full text-gray-600"
                    >School Life</span
                  >
                </div>
                <h3 class="font-bold text-lg text-spark-navy mb-1">
                  Anyone else feeling overwhelmed by mock exams?
                </h3>
                <p class="text-gray-600 text-sm mb-4">
                  I feel like I have zero free time right now and the pressure
                  is getting to me...
                </p>
                <div
                  class="flex items-center gap-6 text-gray-400 text-sm font-medium"
                >
                  <div
                    class="flex items-center gap-2 hover:text-spark-blue transition"
                  >
                    <i
                      data-lucide="message-square"
                      class="w-[18px] h-[18px]"
                    ></i>
                    24
                  </div>
                  <div
                    class="flex items-center gap-2 hover:text-spark-red transition"
                  >
                    <i data-lucide="heart" class="w-[18px] h-[18px]"></i> 12
                  </div>
                  <div
                    class="flex items-center gap-2 ml-auto hover:text-spark-navy transition"
                  >
                    <i data-lucide="share-2" class="w-[18px] h-[18px]"></i>
                    Share
                  </div>
                </div>
              </div>
              <div
                class="bg-white p-5 rounded-2xl border border-spark-blue/50 bg-blue-50/30 shadow-sm hover:shadow-md transition-shadow cursor-pointer"
              >
                <div class="flex items-center gap-3 mb-3">
                  <div
                    class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-xs bg-spark-blue"
                  >
                    M
                  </div>
                  <div class="flex flex-col">
                    <span
                      class="font-bold text-sm text-spark-navy flex items-center gap-2"
                      >Moderator Team
                      <span
                        class="bg-spark-blue text-white text-[10px] px-2 py-0.5 rounded-full"
                        >TEAM</span
                      ></span
                    ><span class="text-xs text-gray-400">Pinned</span>
                  </div>
                  <span
                    class="ml-auto text-xs font-medium px-3 py-1 bg-gray-100 rounded-full text-gray-600"
                    >General Chat</span
                  >
                </div>
                <h3 class="font-bold text-lg text-spark-navy mb-1">
                  Welcome to the Community! Please read our guidelines ‚ö°Ô∏è
                </h3>
                <p class="text-gray-600 text-sm mb-4">
                  We want this space to be safe for everyone. Here is how we
                  keep it that way...
                </p>
                <div
                  class="flex items-center gap-6 text-gray-400 text-sm font-medium"
                >
                  <div
                    class="flex items-center gap-2 hover:text-spark-blue transition"
                  >
                    <i
                      data-lucide="message-square"
                      class="w-[18px] h-[18px]"
                    ></i>
                    5
                  </div>
                  <div
                    class="flex items-center gap-2 hover:text-spark-red transition"
                  >
                    <i data-lucide="heart" class="w-[18px] h-[18px]"></i> 142
                  </div>
                  <div
                    class="flex items-center gap-2 ml-auto hover:text-spark-navy transition"
                  >
                    <i data-lucide="share-2" class="w-[18px] h-[18px]"></i>
                    Share
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- PROFILE VIEW -->
          <div id="view-profile" class="hidden max-w-3xl mx-auto space-y-6">
            <div
              class="bg-white rounded-3xl p-8 border border-gray-200 shadow-sm relative overflow-hidden"
            >
              <div
                class="absolute top-0 left-0 right-0 h-24 bg-gradient-to-r from-spark-blue/20 to-spark-yellow/20"
              ></div>
              <div
                class="relative flex flex-col md:flex-row gap-6 items-start mt-4"
              >
                <div
                  class="w-24 h-24 rounded-full bg-spark-blue flex items-center justify-center text-white text-4xl font-bold border-4 border-white shadow-md shrink-0"
                >
                  S
                </div>
                <div class="flex-1 w-full">
                  <div class="flex justify-between items-start">
                    <div class="w-full">
                      <h3 class="text-2xl font-bold text-spark-navy">
                        SparkExplorer
                      </h3>
                      <p class="text-gray-400 text-sm font-medium mb-2">
                        @sparky_fan
                      </p>
                      <p class="text-gray-700">
                        Just here to chat and support others! üåü
                      </p>
                    </div>
                    <button
                      class="p-2 text-gray-400 hover:text-spark-blue hover:bg-blue-50 rounded-full transition"
                    >
                      <i data-lucide="edit-3" class="w-5 h-5"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div
                class="grid grid-cols-3 gap-4 mt-8 pt-6 border-t border-gray-100"
              >
                <div class="text-center">
                  <div class="text-2xl font-bold text-spark-navy">1</div>
                  <div class="text-xs font-bold text-gray-400 uppercase">
                    Post
                  </div>
                </div>
                <div class="text-center border-l border-gray-100">
                  <div class="text-2xl font-bold text-spark-navy">1</div>
                  <div class="text-xs font-bold text-gray-400 uppercase">
                    Reply
                  </div>
                </div>
                <div class="text-center border-l border-gray-100">
                  <div class="text-2xl font-bold text-spark-navy">15</div>
                  <div class="text-xs font-bold text-gray-400 uppercase">
                    Likes
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <div
      class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-6 py-3 flex justify-between items-center z-30"
    >
      <a href="home.html" class="text-gray-400"
        ><i data-lucide="home" class="w-6 h-6"></i
      ></a>
      <a href="resources.html" class="text-gray-400"
        ><i data-lucide="book-open" class="w-6 h-6"></i
      ></a>
      <a href="forums.html" class="text-spark-blue"
        ><i data-lucide="users" class="w-6 h-6"></i
      ></a>
    </div>

    <!-- Safety Modal -->
    <div
      id="safety-modal"
      class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-spark-navy/80 backdrop-blur-sm animate-fade-in"
    >
      <div
        class="bg-white rounded-3xl max-w-md w-full overflow-hidden shadow-2xl"
      >
        <div class="bg-spark-red p-6 text-white relative">
          <button
            id="close-safety-modal"
            class="absolute top-4 right-4 bg-white/20 rounded-full p-1 hover:bg-white/30 transition"
          >
            <i data-lucide="x" class="w-5 h-5"></i>
          </button>
          <h2 class="text-2xl font-bold flex items-center gap-2">
            <i data-lucide="alert-triangle" class="animate-pulse"></i> Need help
            right now?
          </h2>
          <p class="mt-2 text-white/90 text-sm">
            If you or someone else is in danger, please call 999 immediately.
            You are not alone.
          </p>
        </div>
        <div class="p-6 space-y-4">
          <div class="bg-gray-50 p-4 rounded-2xl border border-gray-100">
            <h3 class="font-bold text-spark-navy mb-2">
              Free & Confidential Support
            </h3>
            <a
              href="tel:08001111"
              class="flex items-center gap-4 p-3 bg-white rounded-xl shadow-sm border border-gray-100 hover:border-spark-blue transition-colors group mb-3"
            >
              <div
                class="bg-green-100 text-green-600 p-2 rounded-full group-hover:scale-110 transition-transform"
              >
                <i data-lucide="phone" class="w-5 h-5"></i>
              </div>
              <div>
                <p class="font-bold text-gray-800">Childline</p>
                <p class="text-xs text-gray-500">Call 0800 1111 (24/7)</p>
              </div>
            </a>
          </div>
          <button
            id="close-safety-action"
            class="w-full py-3 bg-gray-100 text-gray-700 font-bold rounded-xl hover:bg-gray-200 transition"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <script type="module" src="assets/js/layout.js"></script>
    <script type="module">
      import { initAuthCheck } from "./assets/js/firebase.js";
      initAuthCheck();

      const tabFeed = document.getElementById("tab-feed");
      const tabProfile = document.getElementById("tab-profile");
      const viewFeed = document.getElementById("view-feed");
      const viewProfile = document.getElementById("view-profile");

      tabFeed.addEventListener("click", () => {
        tabFeed.classList.add("bg-white", "text-spark-blue", "shadow-sm");
        tabFeed.classList.remove("text-gray-500", "hover:text-gray-700");
        tabProfile.classList.remove("bg-white", "text-spark-blue", "shadow-sm");
        tabProfile.classList.add("text-gray-500", "hover:text-gray-700");
        viewFeed.classList.remove("hidden");
        viewProfile.classList.add("hidden");
      });

      tabProfile.addEventListener("click", () => {
        tabProfile.classList.add("bg-white", "text-spark-blue", "shadow-sm");
        tabProfile.classList.remove("text-gray-500", "hover:text-gray-700");
        tabFeed.classList.remove("bg-white", "text-spark-blue", "shadow-sm");
        tabFeed.classList.add("text-gray-500", "hover:text-gray-700");
        viewProfile.classList.remove("hidden");
        viewFeed.classList.add("hidden");
      });
    </script>
  </body>
</html>
